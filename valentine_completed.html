<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Valentine</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@400;600&display=swap');

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
            background-color: #ffdde1;
            background-image: linear-gradient(0deg, #ffdde1 0%, #ee9ca7 100%);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            text-align: center;
        }

        .container {
            position: relative;
            width: 100%;
            max-width: 600px;
            padding: 20px;
        }

        h1 {
            font-family: 'Dancing Script', cursive;
            font-size: 3rem;
            color: #d63384;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            animation: pulse 2s infinite;
        }

        /* --- Proposal Section --- */
        .buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        button {
            padding: 15px 40px;
            font-size: 1.2rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.2s;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .btn-yes {
            background-color: #ff4d6d;
            color: white;
        }

        .btn-yes:hover {
            transform: scale(1.1);
            background-color: #d90429;
        }

        .btn-no {
            background-color: #fff;
            color: #ff4d6d;
            position: relative; /* Initial position */
            z-index: 100;
        }

        /* --- Letters Grid Section --- */
        .letters-section {
            display: none;
            width: 100%;
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        /* The Card Container */
        .letter-card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            cursor: pointer;
            transition: all 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            display: flex;
            align-items: center;
            justify-content: center;
            aspect-ratio: 1;
            position: relative;
            z-index: 1;
        }

        /* State 1: Envelope Icon */
        .face-envelope {
            font-size: 2.5rem;
            display: block;
        }

        /* State 2: Topic (Hidden initially) */
        .face-topic {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
            padding: 10px;
        }

        .topic-text {
            font-family: 'Dancing Script', cursive;
            font-size: 1.5rem;
            color: #d63384;
            margin-bottom: 5px;
            line-height: 1.1;
        }

        .tap-hint {
            font-size: 0.7rem;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* State 3: Content (Hidden initially) */
        .face-content {
            display: none;
            text-align: left;
            width: 100%;
            height: 100%;
            padding: 20px;
            overflow-y: auto;
            font-size: 1rem;
            line-height: 1.6;
            color: #444;
            border: 2px solid #ffdde1;
            border-radius: 8px;
            background: #fffdf9;
        }

        .face-content h3 {
             font-family: 'Dancing Script', cursive;
             color: #d63384;
             font-size: 1.8rem;
             margin-bottom: 10px;
        }

        /* --- ACTIVE STATE 1: Centered & Showing Topic --- */
        .letter-card.centered {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(1.1);
            width: 80vw;
            max-width: 300px;
            aspect-ratio: 1.5/1;
            z-index: 1000;
            background: #fff;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .letter-card.centered .face-envelope { display: none; }
        .letter-card.centered .face-topic { display: flex; }
        .letter-card.centered .face-content { display: none; }

        /* --- ACTIVE STATE 2: Expanded & Showing Content --- */
        /* UPDATED: Changed top to 58% to move it down */
        .letter-card.open {
            position: fixed;
            top: 58%;
            left: 50%;
            transform: translate(-50%, -50%) scale(1);
            width: 90vw;
            max-width: 400px;
            height: 60vh;
            aspect-ratio: auto;
            z-index: 1001;
            background: #fff;
        }

        .letter-card.open .face-envelope { display: none; }
        .letter-card.open .face-topic { display: none; }
        .letter-card.open .face-content { display: block; animation: fadeIn 0.5s; }

        /* Fade out other items */
        .letter-card.faded {
            opacity: 0;
            pointer-events: none;
        }

        /* Close Button (Visible only when Open) */
        .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 1.5rem;
            color: #aaa;
            display: none;
            z-index: 1002;
            cursor: pointer;
        }
        .letter-card.open .close-btn { display: block; }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

    <div class="container">

        <div id="proposal">
            <!-- CHANGE HER NAME HERE -->
            <h1>Will you be my Valentine, <span id="herName">Naveesha</span>? üåπ</h1>
            <div class="buttons">
                <button class="btn-yes" onclick="acceptProposal()">YES!</button>
                <button class="btn-no" id="noBtn" onmouseover="moveButton()" ontouchstart="moveButton()">No</button>
            </div>
        </div>

        <div id="letters" class="letters-section">
            <h1>9 Reasons Why ‚ù§Ô∏è</h1>
            <div class="grid-container">

                <div class="letter-card" onclick="handleCardClick(this)">
                    <div class="face-envelope">üíå</div>
                    <div class="face-topic">
                        <h2 class="topic-text">The First Day</h2>
                        <span class="tap-hint">(Tap to read)</span>
                    </div>
                    <div class="face-content">
                        <div class="close-btn">√ó</div>
                        <h3>The First Day</h3>
                        <p>I still remember the first day we met üòå. Purple top and a black hat ‚ú®. I don't speak much with many people, but that day u became someone I felt close to (no doubt u might have had ur charms üòå). Never thought those small conversations would bring us to where we are today. I am truly grateful for your presence in my life. Love you ‚ù§Ô∏èüòö</p>
                    </div>
                </div>

                <div class="letter-card" onclick="handleCardClick(this)">
                    <div class="face-envelope">üíå</div>
                    <div class="face-topic">
                        <h2 class="topic-text">Us</h2>
                        <span class="tap-hint">(Tap to read)</span>
                    </div>
                    <div class="face-content">
                        <div class="close-btn">√ó</div>
                        <h3>Us</h3>
                        <p>I don't know what the future holds, but I know I need u in it. I constantly dream about my life with u‚Äîgrocery shopping together, cuddling in bed, traveling to different countries, cooking in the kitchen, cute arguments, and many more. Let's see what our future holds together üòå</p>
                    </div>
                </div>

                <div class="letter-card" onclick="handleCardClick(this)">
                    <div class="face-envelope">üíå</div>
                    <div class="face-topic">
                        <h2 class="topic-text">Better Me</h2>
                        <span class="tap-hint">(Tap to read)</span>
                    </div>
                    <div class="face-content">
                        <div class="close-btn">√ó</div>
                        <h3>Better Me</h3>
                        <p>You make me want to be a better man. I always try to push myself to be a better version so I can treat u better every day. That urge u created, I felt it for the first time with you üòå. So yhh, I guess it‚Äôs true what people say: there is a woman behind every successful man.</p>
                    </div>
                </div>

                <div class="letter-card" onclick="handleCardClick(this)">
                    <div class="face-envelope">üíå</div>
                    <div class="face-topic">
                        <h2 class="topic-text">Favorite Memory</h2>
                        <span class="tap-hint">(Tap to read)</span>
                    </div>
                    <div class="face-content">
                        <div class="close-btn">√ó</div>
                        <h3>Favorite Memory</h3>
                        <p>We‚Äôve created many memories in this short time, and we will make more. I value each and every one of them, but one touched me deeply üòå. One day when we hugged, u grabbed the back of my head with your hand‚Äîliterally <i>'oya mage oluwa atha gaawa'</i> during our hug. I still recall that moment vividly in my head.</p>
                    </div>
                </div>

                <div class="letter-card" onclick="handleCardClick(this)">
                    <div class="face-envelope">üíå</div>
                    <div class="face-topic">
                        <h2 class="topic-text">Thank You</h2>
                        <span class="tap-hint">(Tap to read)</span>
                    </div>
                    <div class="face-content">
                        <div class="close-btn">√ó</div>
                        <h3>Thank You</h3>
                        <p>I don't say it enough, but thank you for choosing me, coming into my life, and bearing with my difficult behaviors üòå. Sometimes ur motivation drove me forward in life. U became my top priority within weeks. I don't usually make such priorities, but u became an exception. I am truly grateful for ur love and care. Love u loads ‚ù§Ô∏èüòö</p>
                    </div>
                </div>

                <div class="letter-card" onclick="handleCardClick(this)">
                    <div class="face-envelope">üíå</div>
                    <div class="face-topic">
                        <h2 class="topic-text">Home</h2>
                        <span class="tap-hint">(Tap to read)</span>
                    </div>
                    <div class="face-content">
                        <div class="close-btn">√ó</div>
                        <h3>Home</h3>
                        <p>Everyone has their problems and so do I‚Äîacademic pressure, small fights with family, friend issues, and many more. But I forget all of it when I am with you. Maybe that's the magic of love. U became my second home, my safe place. U never judged me for who I am or what I do. That itself is very rare to find.</p>
                    </div>
                </div>

                <div class="letter-card" onclick="handleCardClick(this)">
                    <div class="face-envelope">üíå</div>
                    <div class="face-topic">
                        <h2 class="topic-text">Little Things</h2>
                        <span class="tap-hint">(Tap to read)</span>
                    </div>
                    <div class="face-content">
                        <div class="close-btn">√ó</div>
                        <h3>Little Things</h3>
                        <p>I love the small things: the way u tie ur hair mid-conversation, the way u look at me with ur big eyes, the way u say 'baaa' without a single sound. The way u grab me when we are hugging, the way u laugh after teasing me, and many more. I cherish those moments with my whole heart.</p>
                    </div>
                </div>

                <div class="letter-card" onclick="handleCardClick(this)">
                    <div class="face-envelope">üíå</div>
                    <div class="face-topic">
                        <h2 class="topic-text">My Everything</h2>
                        <span class="tap-hint">(Tap to read)</span>
                    </div>
                    <div class="face-content">
                        <div class="close-btn">√ó</div>
                        <h3>My Everything</h3>
                        <p>U are the first thing I think of when I wake up. The first thing I do is check the phone for ur message before continuing with other things. There is not a single moment in my day where I don't remember you. U are the last thing on my mind before I go to sleep. So yhh, u became my everything within a few months ‚ù§Ô∏è</p>
                    </div>
                </div>

                <div class="letter-card" onclick="handleCardClick(this)">
                    <div class="face-envelope">üíå</div>
                    <div class="face-topic">
                        <h2 class="topic-text">My Best Friend</h2>
                        <span class="tap-hint">(Tap to read)</span>
                    </div>
                    <div class="face-content">
                        <div class="close-btn">√ó</div>
                        <h3>My Best Friend</h3>
                        <p>Ur not just my Valentine, luv. U are my best friend, my little kiddo, my second mom, and my biggest supporter. Thank you for everything u do and the impact u make in my life with the small things you do ‚ù§Ô∏è</p>
                    </div>
                </div>

            </div>
        </div>

    </div>

    <!-- Background music (phones allow sound only after a tap/click, so it starts after pressing YES) -->
    <!-- Put a file named "music.mp3" in the SAME folder as this HTML file -->
    <audio id="bgMusic" loop preload="auto">
        <source src="music.mp3" type="audio/mpeg">
    </audio>

    <script>
        const noBtn = document.getElementById('noBtn');
        const proposalDiv = document.getElementById('proposal');
        const lettersDiv = document.getElementById('letters');

        // --- Runaway No Button ---
        function moveButton() {
            const maxWidth = window.innerWidth - noBtn.offsetWidth;
            const maxHeight = window.innerHeight - noBtn.offsetHeight;
            const randomX = Math.floor(Math.random() * maxWidth);
            const randomY = Math.floor(Math.random() * maxHeight);

            noBtn.style.position = 'fixed';
            noBtn.style.left = randomX + 'px';
            noBtn.style.top = randomY + 'px';
        }

        // --- Accept Proposal ---
        function acceptProposal() {
            proposalDiv.style.display = 'none';
            lettersDiv.style.display = 'block';
            launchConfetti();

            // Start background music (allowed because this runs after user clicks YES)
            const music = document.getElementById('bgMusic');
            if (music) {
                music.volume = 0.8;
                music.play().catch(() => {
                    // If the phone blocks it for any reason, user can tap screen once more.
                });
            }
        }

        // --- Card Interaction Logic (3 Steps) ---
        function handleCardClick(card) {
            const allCards = document.querySelectorAll('.letter-card');

            // 1. If card is OPEN (Step 3) -> Close it (Reset everything)
            if (card.classList.contains('open')) {
                resetAllCards(allCards);
                return;
            }

            // 2. If card is CENTERED/TOPIC (Step 2) -> Open it
            if (card.classList.contains('centered')) {
                card.classList.remove('centered');
                card.classList.add('open');
                return;
            }

            // 3. If card is DEFAULT (Step 1) -> Center it & Show Topic
            // First, reset any other open/centered cards just in case
            resetAllCards(allCards);

            // Hide others
            allCards.forEach(c => {
                if (c !== card) c.classList.add('faded');
            });

            // Center this one
            card.classList.add('centered');
        }

        function resetAllCards(allCards) {
            allCards.forEach(c => {
                c.classList.remove('centered');
                c.classList.remove('open');
                c.classList.remove('faded');
            });
        }

        // --- Confetti ---
        function launchConfetti() {
            const colors = ['#ff4d6d', '#d63384', '#fff'];
            for(let i=0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.style.position = 'fixed';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.top = '-10px';
                confetti.style.width = '10px';
                confetti.style.height = '10px';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animation = `fall ${Math.random() * 3 + 2}s linear forwards`;
                document.body.appendChild(confetti);
            }
        }

        const styleSheet = document.createElement("style");
        styleSheet.innerText = `
            @keyframes fall {
                to { transform: translateY(100vh) rotate(720deg); }
            }
        `;
        document.head.appendChild(styleSheet);
    </script>
</body>
</html>
